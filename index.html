<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <title>Emergency Location Background</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js" ></script>
    <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <style>
        body {
            width: 100%;
            height: 100%;
        }
    img#image, div#qrcode {
      display: none;
    }
    canvas#canvas {
        width: 100%;
        cursor: pointer;
    }
    main, main div {
        z-index: 10;
    }
    /** https://1stwebdesigner.com/15-css-background-effects/ **/
    body {
	background: #50a3a2;
    background: -webkit-linear-gradient(top left, #50a3a2 0%, #53e3a6 100%);
    background: -moz-linear-gradient(top left, #50a3a2 0%, #53e3a6 100%);
    background: -o-linear-gradient(top left, #50a3a2 0%, #53e3a6 100%);
    background: linear-gradient(to bottom right, #50a3a2 0%, #53e3a6 100%);
    }
    .bg-bubbles{
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	
	z-index: 1;
    }	
    .bg-bubbles {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
}
.bg-bubbles li {
  position: absolute;
  list-style: none;
  display: block;
  width: 40px;
  height: 40px;
  background-color: rgba(255, 255, 255, 0.15);
  bottom: -160px;
  -webkit-animation: square 25s infinite;
  animation: square 25s infinite;
  transition-timing-function: linear;
}
.bg-bubbles li:nth-child(1) {
  left: 10%;
}
.bg-bubbles li:nth-child(2) {
  left: 20%;
  width: 80px;
  height: 80px;
  -webkit-animation-delay: 2s;
          animation-delay: 2s;
  -webkit-animation-duration: 17s;
          animation-duration: 17s;
}
.bg-bubbles li:nth-child(3) {
  left: 25%;
  -webkit-animation-delay: 4s;
          animation-delay: 4s;
}
.bg-bubbles li:nth-child(4) {
  left: 40%;
  width: 60px;
  height: 60px;
  -webkit-animation-duration: 22s;
          animation-duration: 22s;
  background-color: rgba(255, 255, 255, 0.25);
}
.bg-bubbles li:nth-child(5) {
  left: 70%;
}
.bg-bubbles li:nth-child(6) {
  left: 80%;
  width: 120px;
  height: 120px;
  -webkit-animation-delay: 3s;
          animation-delay: 3s;
  background-color: rgba(255, 255, 255, 0.2);
}
.bg-bubbles li:nth-child(7) {
  left: 32%;
  width: 160px;
  height: 160px;
  -webkit-animation-delay: 7s;
          animation-delay: 7s;
}
.bg-bubbles li:nth-child(8) {
  left: 55%;
  width: 20px;
  height: 20px;
  -webkit-animation-delay: 15s;
          animation-delay: 15s;
  -webkit-animation-duration: 40s;
          animation-duration: 40s;
}
.bg-bubbles li:nth-child(9) {
  left: 25%;
  width: 10px;
  height: 10px;
  -webkit-animation-delay: 2s;
          animation-delay: 2s;
  -webkit-animation-duration: 40s;
          animation-duration: 40s;
  background-color: rgba(255, 255, 255, 0.3);
}
.bg-bubbles li:nth-child(10) {
  left: 90%;
  width: 160px;
  height: 160px;
  -webkit-animation-delay: 11s;
          animation-delay: 11s;
}
@-webkit-keyframes square {
  0% {
    transform: translateY(200px);
  }
  100% {
    transform: translateY(-900px) rotate(600deg);
  }
}
@keyframes square {
  0% {
    transform: translateY(200px);
  }
  100% {
    transform: translateY(-900px) rotate(600deg);
  }
}

#hero, #footer {
    background-color: rgba(255, 255, 255, 0.7) !important;
    border-radius: 10px;
}
.container {
    background-color: rgba(255,255,255,0.4) !important;
    border-radius: 10px;
    margin-top: 10px;
    margin-bottom: 10px;
    padding-bottom: 20px;
}
body {
    padding-top:20px;
    padding-bottom:20px;
}
    </style>
</head>

<body>

<script type="text/javascript">
// <![CDATA[
var qrcodesize=350;
var qrcodeborder=40;
var targetx=1920;
var targety=1080;

function onUpload() {
	  let fileObj = document.getElementById('fileupload');
    let file, filename="-";
    if (fileObj.files) {
        file = fileObj.files[0]
    		console.log("1");
        filename = file.name;
        var fr = new FileReader;
        fr.onloadend = displayImg;
        fr.readAsDataURL(file);
    } else {
        file = fileObj.value;
        displayImg(file);
    };
};
function displayImg(file) {
    if(typeof file === "object") {
        file = file.target.result; // file reader
    }
    document.getElementById("image").setAttribute("src",file);
    let ctx = document.getElementById("canvas").getContext("2d");
    var background = new Image();
    background.src = file; 
    background.addEventListener('load', function() {
        ctx.drawImage(background,0,0,targetx,targety);
        ctx.fillStyle = '#FFFFFF';
        ctx.fillRect((targetx/2-qrcodesize/2-qrcodeborder), targety-(qrcodesize+qrcodeborder*2), qrcodesize+qrcodeborder*2, qrcodesize+qrcodeborder*2);
        ctx.font = '48px sans-serif';
        
        ctx.save();
        ctx.fillStyle = '#FF0000';
        ctx.translate(targetx/2-qrcodesize/2-qrcodeborder-qrcodeborder/3, targety-qrcodesize/2-qrcodeborder);
        ctx.rotate(-Math.PI/2);
        ctx.textAlign = "center";
        ctx.strokeStyle = 'white';

        ctx.miterLimit = 2;
        ctx.lineJoin = 'circle';

        // draw an outline, then filled
        ctx.lineWidth = 17;
        ctx.strokeText("Emergency Location", 0, 0);
        ctx.lineWidth = 1;

        ctx.fillText("Emergency Location", 0, 0);
        ctx.restore();
        
        // https://davidshimjs.github.io/qrcodejs/
        var qrcontent = document.getElementById("qrcontent").value;
        new QRCode(document.getElementById("qrcode"), { 
                    text: qrcontent, 
                    width: qrcodesize, height: qrcodesize, 
                    correctLevel : QRCode.CorrectLevel.H
                });
        var qrcode = document.querySelector("#qrcode img");
        qrcode.addEventListener('load', function() {
            ctx.drawImage(qrcode,(targetx/2-qrcodesize/2),targety-qrcodesize-qrcodeborder);
        }, false);
    }, false);

}
function download() {
        var link = document.createElement('a');
        link.download = 'filename.png';
        link.href = document.getElementById('canvas').toDataURL()
        link.click();
    }
// ]]>
</script>


  <main>
    <div id="hero" class="container px-4 text-center bg-light">
      <div class="col-md-12">
          <div style="text-align: right !important; padding-top:5px; z-index:1000 !important;"><a href="index_de.html"><img src="de.png" height="30px" alt="language: DE"/></a></div>
        <h1 class="display-4 fw-normal">Notfall QR-Code</h1>
        <p class="lead fw-normal">Do you also have so many video conferences?<br />
            Of course you do.Since we are all sitting in our home offices due to the pandemic, we are all in video conferences üòê<br />.
            Have you ever thought about what would happen if one of the participants suddenly had a stroke or another medical emergency and fell over?<br />
            The emergency QR code could be a solution!<br />

        </p>
      </div>
    </div>
    <div class="container px-4">
        <div class="row">
            <div class="col-md-12">
                <br /><br />
                <h2>How does it work?</h2>
                </div>
        </div>
        <div class="row">
            <div class="col-md-4"><br /><br />
                We almost all use virtual backgrounds in video conferences.
                The middle part of the background is covered with our body.
            </div>
            <div class="col-md-4"><br /><br />
                In a medical emergency, if someone falls over in front of the screen, the entire background becomes visible.
                The idea is to store emergency information in this area, for example an address.
            </div>
            <div class="col-md-4"><br /><br />
                With a QR code, the information is not immediately readable if you stand up for a moment.
                However, For maximum privacy, you should turn off your camera when you go and fetch a coffe üòÄ
            </div>

        </div>
    </div>
    <div class="container px-4">
        <div class="row">
            <div class="col-md-12">
                <br /><br />
                <h2>3 Steps...</h2>
                </div>
        </div>
        <div class="row">
            <div class="col-md-4">
                <p>
        <h3>Step 1</h3>
                What information should be hidden in the QR code?
                For example, it could be useful to know the address where you are.
                For example, go to <a href="https://maps.google.com" target="_new">Google Maps</a> and select the address where you are working.
                Click on the share symbol and copy the link into the following field:<br /><br />
        <input type="text" name="qrcontent" id="qrcontent" style="width: 100%;"/>
        </p>
    </div>
        <div class="col-md-4">
        <p>
            <h3>Step 2</h3>
            From your computer, select the background image on which you want the QR code to be placed.
            Pay attention to the aspect ratio of your image. Ideally, it should be 1920x1080 pixels.<br /><br /><br />
            <input type="file" id="fileupload" onchange="onUpload();" /></li>
        </p>
    </div>
    <div class="col-md-4">
        <p>
            <h3>Step 3</h3>
        Click on the image to save:<br />
        <canvas id="canvas" width="1920" height="1080" name="test.png" onclick="download();"></canvas>
            <div id="qrcode"></div>
            <img id="image" src="" alt="" />
        </p>
    </div>
    <div class="container px-4">
        <div class="row">
            <div class="col-md-12">
                <small>Note:<br />
                    If you use Google Maps, your data will of course end up with Google.<br />
                    However, your background image remains on your system alone - it is only loaded into the browser.
            </div>
        </div>
    </div>
</div>
</div>
</div>
</main>

<footer id="footer" class="container py-5">
  <div class="row">
    <div class="col-md-12 text-center">
	    <a href="https://github.com/rdmueller/vikoqr/issues">Feedback?</a> | <a href="https://github.com/rdmueller/vikoqr/">Fork me on Github!</a>
    </div>
  </div>
</footer>
<ul class="bg-bubbles">
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
	</ul>
</body>
</html>
